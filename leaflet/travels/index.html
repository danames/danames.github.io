<html>
<head>
    <title>Dan Ames to See the World</title>
    <link rel="stylesheet" href="style.css" type="text/css">
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-geojson@2.10.0/dist/leaflet-geojson.js"></script>
    <script src="https://unpkg.com/leaflet-bing@2.0.0/dist/leaflet-bing.js"></script>

    <script>
        // Note that I'm declaring all my layer variables as global so I can easily access them to turn them on and off through buttons.
        var map, australia, bahrain, canada, cayman, czechia, england, france, germany, japan, mexico, spain, switzerland, thailand, thenetherlands, usa, vietnam;

        function init() {
            // Set up my API key for Bing Maps.
            var apiKey = "AiW41aALyX4pDfE0jQG93WywSHLih1ihycHtwbaIPmtpZEOuw1iloQuuBmwJm5UA";

            // Create a new map object and connect it to the right DIV id that is in the html.
            map = L.map("map_id").setView([0, 0], 2);

            // Add some useful map controls
            map.addControl(L.control.layers());
            map.addControl(L.control.zoom());
            map.addControl(L.control.scale());

            // Create a layer object that holds the Bing map roads layer.
            var bing_layer = L.tileLayer.bing({name: "Bing Roads", key: apiKey});

            // Create layers for each KML file
            australia = L.geoJson(null, {
                name: "australia"
            });
            fetch("kml/australia.kml")
                .then(response => response.text())
                .then(kml => {
                    const geojson = toGeoJSON(kml, {extractStyles: true, extractAttributes: true});
                    australia.addData(geojson);
                    map.addLayer(australia);
                });

            bahrain = L.geoJson(null, {
                name: "bahrain"
            });
            fetch("kml/bahrain.kml")
                .then(response => response.text())
                .then(kml => {
                    const geojson = toGeoJSON(kml, {extractStyles: true, extractAttributes: true});
                    bahrain.addData(geojson);
                    map.addLayer(bahrain);
                });

            canada = L.geoJson(null, {
                name: "canada"
            });
            fetch("kml/canada.kml")
                .then(response => response.text())
                .then(kml => {
                    const geojson = toGeoJSON(kml, {extractStyles: true, extractAttributes: true});
                    canada.addData(geojson);
                    map.addLayer(canada);
                });

            cayman = L.geoJson(null, {
                name: "cayman"
            });
            fetch("kml/cayman.kml")
                .then(response => response.text())
                .then(kml => {
                    const geojson = toGeoJSON(kml, {extractStyles: true, extractAttributes: true});
                    cayman.addData(geojson);
                    map.addLayer(cayman);
                });

            czechia = L.geoJson(null, {
                name: "czechia"
            });
            fetch("kml/czechia.kml")
                .then(response => response.text())
                .then(kml => {
                    const geojson = toGeoJSON(kml, {extractStyles: true, extractAttributes: true});
                    czechia.addData(geojson);
                    map.addLayer(czechia);
                });

            england = L.geoJson(null, {
                name: "england"
            });
            fetch("kml/england.kml")
                .then(response => response.text())
                .then(kml => {
                    const geojson = toGeoJSON(kml, {extractStyles: true, extractAttributes: true});
                    england.addData(geojson);
                    map.addLayer(england);
                });

            france = L.geoJson(null, {
                name: "france"
            });
            fetch("kml/france.kml")
                .then(response => response.text())
                .then(kml => {
                    const geojson = toGeoJSON(kml, {extractStyles: true, extractAttributes: true});
                    france.addData(geojson);
                    map.addLayer(france);
                });

            germany = L.geoJson(null, {
                name: "germany"
            });
            fetch("kml/germany.kml")
                .then(response => response.text())
                .then(kml => {
                    const geojson = toGeoJSON(kml, {extractStyles: true, extractAttributes: true});
                    germany.addData(geojson);
                    map.addLayer(germany);
                });

            japan = L.geoJson(null, {
                name: "japan"
            });
            fetch("kml/japan.kml")
                .then(response => response.text())
                .then(kml => {
                    const geojson = toGeoJSON(kml, {extractStyles: true, extractAttributes: true});
                    japan.addData(geojson);
                    map.addLayer(japan);
                });

            mexico = L.geoJson(null, {
                name: "mexico"
            });
            fetch("kml/mexico.kml")
                .then(response => response.text())
                .then(kml => {
                    const geojson = toGeoJSON(kml, {extractStyles: true, extractAttributes: true});
                    mexico.addData(geojson);
                    map.addLayer(mexico);
                });

            spain = L.geoJson(null, {
                name: "spain"
            });
            fetch("kml/spain.kml")
                .then(response => response.text())
                .then(kml => {
                    const geojson = toGeoJSON(kml, {extractStyles: true, extractAttributes: true});
                    spain.addData(geojson);
                    map.addLayer(spain);
                });

            switzerland = L.geoJson(null, {
                name: "switzerland"
            });
            fetch("kml/switzerland.kml")
                .then(response => response.text())
                .then(kml => {
                    const geojson = toGeoJSON(kml, {extractStyles: true, extractAttributes: true});
                    switzerland.addData(geojson);
                    map.addLayer(switzerland);
                });

            thailand = L.geoJson(null, {
                name: "thailand"
            });
            fetch("kml/thailand.kml")
                .then(response => response.text())
                .then(kml => {
                    const geojson = toGeoJSON(kml, {extractStyles: true, extractAttributes: true});
                    thailand.addData(geojson);
                    map.addLayer(thailand);
                });

            thenetherlands = L.geoJson(null, {
                name: "thenetherlands"
            });
            fetch("kml/thenetherlands.kml")
                .then(response => response.text())
                .then(kml => {
                    const geojson = toGeoJSON(kml, {extractStyles: true, extractAttributes: true});
                    thenetherlands.addData(geojson);
                    map.addLayer(thenetherlands);
                });

            usa = L.geoJson(null, {
                name: "usa"
            });
            fetch
